(window.webpackJsonp=window.webpackJsonp||[]).push([[20,4,6,9,10,13,17],{515:function(t,e,n){"use strict";n.r(e);n(8),n(47),n(209),n(36);var o={props:{value:{default:0,type:Number},max:{default:null,type:Number}},data:function(){return{input:this.value?this.value:0,state:!1,parsed:null}},watch:{value:function(t){this.parsed=t}},mounted:function(){this.parsed=this.value},methods:{show:function(){this.state=!0,this.input=this.parsed.toString()},onAdd:function(dt){this.max&&parseFloat(this.input+dt)>this.max?this.input=this.max.toString():0===parseInt(this.input)?this.input=dt:this.input+=dt},onDelete:function(){this.input=this.input.slice(0,-1)},onSubmit:function(){this.parsed=parseFloat(this.input?this.input:0),this.$emit("submit",this.parsed),this.state=!1}}},r=n(84),component=Object(r.a)(o,(function(){var t=this,e=t._self._c;return e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.parsed,expression:"parsed"}],staticClass:"form-control input-modal",attrs:{readonly:"",type:"text"},domProps:{value:t.parsed},on:{click:t.show,input:function(e){e.target.composing||(t.parsed=e.target.value)}}}),t._v(" "),e("b-modal",{ref:"modalNumber",attrs:{id:"modalNumber",centered:"","no-fade":"","hide-header":"","hide-footer":"","modal-class":"fade scale","content-class":"text-center rounded",title:"BootstrapVue"},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},[e("b-container",[e("div",{staticClass:"pt-4 text-right"},[e("h5",[e("strong",[t._v("\n            "+t._s(t.input?t.input:0)+"\n          ")])])])]),t._v(" "),e("hr",{staticClass:"m-3"}),t._v(" "),t.max?e("b-container",[e("div",{staticClass:"text-right"},[e("h6",{staticClass:"text-danger"},[e("strong",[t._v("\n            ( Max "+t._s(t.max)+" )\n          ")])])])]):t._e(),t._v(" "),e("div",[e("div",{staticClass:"row m-3 mb-5"},[t._l(9,(function(i){return e("div",{key:i,staticClass:"col-4 p-4 b-1 clickable",on:{click:function(e){t.onAdd(i.toString())}}},[t._v("\n          "+t._s(i)+"\n        ")])})),t._v(" "),e("div",{staticClass:"col-4 p-4 b-1",on:{click:function(e){return t.onAdd(".")}}},[t._v("\n          .\n        ")]),t._v(" "),e("div",{staticClass:"col-4 p-4 b-1",on:{click:function(e){t.input.length>0&&t.onAdd("0")}}},[t._v("\n          0\n        ")]),t._v(" "),e("div",{staticClass:"col-4 p-4 b-1",on:{click:t.onDelete}},[t._v("\n          x\n        ")])],2)]),t._v(" "),e("b-button",{staticClass:"mt-3 text-white",attrs:{variant:"primary",block:""},on:{click:t.onSubmit}},[t._v("\n      Simpan\n    ")]),t._v(" "),e("b-button",{staticClass:"mt-3",attrs:{variant:"outline-danger",block:""},on:{click:function(){t.state=!1}}},[t._v("\n      Batal\n    ")])],1)],1)}),[],!1,null,null,null);e.default=component.exports},516:function(t,e,n){"use strict";var o=n(26),r=n(98).findIndex,l=n(119),c="findIndex",d=!0;c in[]&&Array(1)[c]((function(){d=!1})),o({target:"Array",proto:!0,forced:d},{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),l(c)},517:function(t,e,n){"use strict";n.r(e);n(41),n(25),n(32);var o={props:{title:{default:"Slimplan",type:String},subtitle:{default:"Home",type:String},refresh:{default:!1,type:Boolean}},data:function(){return{}},methods:{navigateTo:function(t,e){e?this.$router.push(t):this.$router.replace(t)},onLogout:function(){this.$store.commit("uac/logout"),this.navigateTo("/")}}},r=n(84),component=Object(r.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"layout d-flex flex-column justify-content-center"},[e("div",{staticClass:"row p-3 bb-1 bg-primary",staticStyle:{position:"fixed",top:"0",width:"100%","z-index":"9"}},[e("div",{staticClass:"col text-left"},[e("h4",{staticClass:"text-white"},[e("strong",[t._v(t._s(t.title))])]),t._v(" "),e("h6",{staticClass:"text-white"},[t._v("\n        "+t._s(t.subtitle)+"\n      ")])]),t._v(" "),e("div",{staticClass:"col text-right"},["dashboard"===t.$route.name?e("button",{staticClass:"btn btn-danger btn-sm",on:{click:t.onLogout}},[t._v("\n        Logout\n      ")]):e("button",{staticClass:"btn btn-light btn-sm mr-2",on:{click:function(e){return t.$router.back()}}},[t._v("\n        Kembali\n      ")]),t._v(" "),t.refresh?e("button",{staticClass:"btn btn-info btn-sm mr-2",on:{click:function(e){return t.$emit("refreshed")}}},[t._v("\n        Refresh\n      ")]):t._e()])])])}),[],!1,null,null,null);e.default=component.exports},518:function(t,e,n){var content=n(521);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(171).default)("faa51b84",content,!0,{sourceMap:!1})},520:function(t,e,n){"use strict";n(518)},521:function(t,e,n){var o=n(170)((function(i){return i[1]}));o.push([t.i,"\n.modal-xl {\n  max-width: 90vw !important;\n}\n",""]),o.locals={},t.exports=o},522:function(t,e,n){"use strict";n.r(e);n(90),n(142),n(516),n(208),n(25),n(118);var o={components:{},props:{title:{default:"Pilih Produk",type:String},warehouse:{default:function(){return{}},type:Object}},data:function(){return{endpoint:"item/category",state:!1,options:[],selected:[],search:null,isError:!1,isLoading:!1}},methods:{show:function(){this.state=!0,this.fetchData()},onFilter:function(){},onSelected:function(dt){var t=this.selected.findIndex((function(t){return t===dt}));t>=0?this.selected.splice(t,1):this.selected.push(dt)},onRemove:function(t){},fetchData:function(){var t=this,e=this;this.isError=!1,this.isLoading=!0;var n={search:e.search};this.$store.dispatch(this.endpoint,n).then((function(n){t.options=n.data.data,e.isError=!1,e.isLoading=!1})).catch((function(t){console.log("err",t),e.$store.commit("alert/setAlert",{type:"fail",msg:"Gagal Mengambil Data"}),e.isError=!0,e.isLoading=!1}))},submit:function(){this.state=!1,this.$emit("submit",this.selected)}}},r=(n(520),n(84)),component=Object(r.a)(o,(function(){var t=this,e=t._self._c;return e("div",[e("b-modal",{ref:"modalFilter",attrs:{id:"modalFilter",centered:"","no-fade":"","hide-header":"","hide-footer":"",size:"l","modal-class":"fade scale","content-class":"rounded"},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},[e("div",[e("div",{staticClass:"pb-5"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("strong",{staticClass:"text-primary"},[t._v("\n              Filter\n            ")])])]),t._v(" "),t.isLoading?e("div",{staticClass:"row"},[e("div",{staticClass:"col v-center"},[e("b-spinner",{staticClass:"mt-4",attrs:{variant:"primary",type:"grow",label:"Spinning"}})],1)]):e("div",{staticClass:"row",staticStyle:{"overflow-y":"scroll",height:"50vh"}},t._l(t.options,(function(dt,n){return e("div",{key:n,staticClass:"col-3 mt-2 px-0"},[e("div",{staticClass:"card m-1 text-center text-primary v-center",class:{"bg-soft":t.selected.includes(dt.KodeKategori)},staticStyle:{height:"3rem"},on:{click:function(e){return t.onSelected(dt.KodeKategori)}}},[t._v("\n              "+t._s(dt.NamaKategori)+"\n            ")])])})),0)]),t._v(" "),e("div",{staticClass:"row",staticStyle:{position:"absolute",bottom:"0",width:"100%"}},[e("div",{staticClass:"col"},[t._v("\n          "+t._s(t.selected.length)+" Filter Terpilih\n        ")]),t._v(" "),e("div",{staticClass:"col text-right"},[e("b-button",{staticClass:"button-bottom mb-2",attrs:{variant:"outline-danger"},on:{click:function(e){t.selected=[]}}},[t._v("\n            Reset\n          ")]),t._v(" "),e("b-button",{staticClass:"button-bottom mb-2",attrs:{variant:"primary"},on:{click:t.submit}},[t._v("\n            Terapkan\n          ")])],1)])])])],1)}),[],!1,null,null,null);e.default=component.exports},530:function(t,e,n){"use strict";n.r(e);n(16),n(516),n(208);var o={components:{},props:{title:{default:"Pilih",type:String},except:{default:"",type:String},initial:{default:"",type:String},info:{default:"",type:String}},data:function(){return{input:null,state:!1,options:[],selected:null}},mounted:function(){this.initial&&(this.input=this.initial)},methods:{show:function(){var t=this;if(this.state=!0,this.options=JSON.parse(JSON.stringify(this.$store.getters["app/getWarehouse"])),this.except){var e=this.options.findIndex((function(e){return e.KodeLokasi===t.except}));this.options.splice(e,1)}},reset:function(){this.input=null,this.selected=null},onSelected:function(dt){this.input=dt.KodeLokasi,this.selected=dt,this.$emit("submit",this.selected),this.state=!1}}},r=n(84),component=Object(r.a)(o,(function(){var t=this,e=t._self._c;return e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],staticClass:"form-control input-modal mt-2",attrs:{readonly:"",type:"text"},domProps:{value:t.input},on:{click:t.show,input:function(e){e.target.composing||(t.input=e.target.value)}}}),t._v(" "),e("b-modal",{ref:"modalSelect",attrs:{id:"modalSelect",centered:"","no-fade":"","hide-header":"","hide-footer":"","modal-class":"fade scale","content-class":"text-center rounded",title:"BootstrapVue"},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},[e("div",[e("b-container",{staticClass:"mb-4"},[t.info?e("b-badge",{attrs:{variant:"warning"}},[t._v("\n          "+t._s(t.info)+"\n        ")]):t._e(),t._v(" "),e("div",{staticClass:"pt-4"},[e("h5",{staticClass:"text-primary"},[e("strong",[t._v("\n              "+t._s(t.title)+"\n            ")])])])],1),t._v(" "),t._l(t.options,(function(dt,i){return e("div",{key:"o-"+i},[e("div",{staticClass:"row mx-0 card clickable mb-2 py-3",on:{click:function(e){return t.onSelected(dt)}}},[t._v("\n          "+t._s(dt.KodeLokasi)+" - "+t._s(dt.NamaLokasi)+"\n        ")])])}))],2)])],1)}),[],!1,null,null,null);e.default=component.exports},531:function(t,e,n){"use strict";var o=n(26),r=n(532).start;o({target:"String",proto:!0,forced:n(533)},{padStart:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},532:function(t,e,n){var o=n(28),r=n(99),l=n(50),c=n(210),d=n(65),h=o(c),m=o("".slice),v=Math.ceil,f=function(t){return function(e,n,o){var c,f,_=l(d(e)),C=r(n),y=_.length,x=void 0===o?" ":l(o);return C<=y||""==x?_:((f=h(x,v((c=C-y)/x.length))).length>c&&(f=m(f,0,c)),t?_+f:f+_)}};t.exports={start:f(!1),end:f(!0)}},533:function(t,e,n){var o=n(86);t.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(o)},539:function(t,e,n){"use strict";n.r(e);n(25),n(118),n(60);var o={components:{},props:{title:{default:"Pilih",type:String},except:{default:"",type:String},initial:{default:"",type:String}},data:function(){return{input:null,state:!1,search:null,options:[],selected:null,endpoint:"app/fetchCustomer",page:1,total:0,isError:!1,isLoading:!1,debounce:null}},mounted:function(){this.initial&&(this.input=this.initial)},methods:{onSearch:function(){var t=this;this.debounce&&clearTimeout(this.debounce),this.debounce=setTimeout((function(){t.fetchData()}),1e3)},fetchData:function(){var t=this,e=this;this.isError=!1,this.isLoading=!0;var n={page:e.page,search:e.search};this.$store.dispatch(this.endpoint,n).then((function(n){t.options=n.data.data.data,t.total=n.data.data.total,e.isError=!1,e.isLoading=!1})).catch((function(t){console.log("err",t),e.$store.commit("alert/setAlert",{type:"fail",msg:"Gagal Mengambil Data"}),e.isError=!0,e.isLoading=!1}))},show:function(){this.state=!0,this.search=null,this.fetchData()},reset:function(){this.input=null,this.selected=null},onSelected:function(dt){this.input=dt.NamaPelanggan,this.selected=dt,this.$emit("submit",this.selected),this.state=!1}}},r=n(84),component=Object(r.a)(o,(function(){var t=this,e=t._self._c;return e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],staticClass:"form-control input-modal mt-2",attrs:{readonly:"",type:"text"},domProps:{value:t.input},on:{click:t.show,input:function(e){e.target.composing||(t.input=e.target.value)}}}),t._v(" "),e("b-modal",{ref:"modalSelect",attrs:{id:"modalSelect",centered:"","no-fade":"","hide-header":"","hide-footer":"","modal-class":"fade scale","content-class":"text-center rounded",title:"BootstrapVue"},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},[e("div",[e("b-container",{staticClass:"mb-4"},[e("div",{staticClass:"pt-4"},[e("h5",{staticClass:"text-primary"},[e("strong",[t._v("\n              "+t._s(t.title)+"\n            ")])])]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control input-modal mt-2 mb-3",attrs:{placeholder:"Cari",type:"text"},domProps:{value:t.search},on:{input:[function(e){e.target.composing||(t.search=e.target.value)},t.onSearch]}}),t._v(" "),t.isLoading?e("div",{staticClass:"row"},[e("div",{staticClass:"col v-center"},[e("b-spinner",{staticClass:"mt-4",attrs:{variant:"primary",type:"grow",label:"Spinning"}})],1)]):t._l(t.options,(function(dt,i){return e("div",{key:"o-"+i},[e("div",{staticClass:"row mx-0 card clickable mb-2 py-3",on:{click:function(e){return t.onSelected(dt)}}},[t._v("\n            "+t._s(dt.Kontak)+" "),e("br"),t._v(" "+t._s(dt.NamaPelanggan)+"\n          ")])])})),t._v(" "),0!==t.options.length||t.isError?t._e():e("div",{staticClass:"mt-3"},[t._v("\n          Data Tidak Ditemukan "),e("br"),t._v(" "),e("b-button",{staticClass:"mt-3",attrs:{variant:"primary"}},[t._v("\n            Customer Baru\n          ")])],1)],2),t._v(" "),e("div",[e("div",{staticClass:"justify-content-center"},[e("b-pagination",{attrs:{"total-rows":t.total,"per-page":5,disabled:t.isLoading,align:"center"},on:{input:t.fetchData},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)])],1)])],1)}),[],!1,null,null,null);e.default=component.exports},546:function(t,e,n){"use strict";n.r(e);n(25),n(32),n(143),n(8),n(47),n(13),n(531),n(60);var o=n(10),r=n.n(o),l={components:{inputNumber:n(515).default},props:{title:{default:"Pembayaran Nih",type:String}},data:function(){return{update_endpoint:"item/checkerUpdate",payment:0,discount:0,discountType:!1,initial:null,state:!1,isError:!1,isLoading:!1}},mounted:function(){this.initial&&(this.input=this.initial)},methods:{navigateTo:function(t,e){e?this.$router.push(t):this.$router.replace(t)},show:function(dt){this.state=!0,this.initial=dt,this.payment=0,this.discount=0,this.discountType=!1},submit:function(){var t=this,e={KodeKasir:this.initial.KodeKasir,warehouse:this.initial.warehouse,customer:this.initial.customer?this.initial.customer.KodePelanggan:"",tax:this.initial.ppn&&!this.initial.ppn.isIncludePPN?this.initial.ppn.ppnValue:0,payment:this.payment,discount:this.discountType?this.initial.total*(this.discount/100):this.discount,lines:this.initial.lines};this.$store.dispatch(this.update_endpoint,e).then((function(e){t.$store.commit("alert/setAlert",{type:"success",msg:"Data Berhasil Disimpan"}),t.state=!1,t.navigateTo("/dashboard/cashier"),t.print(),t.print()})).catch((function(e){console.log(e),t.$store.commit("alert/setAlert",{type:"fail",msg:"Terjadi Kesalahan"})}))},checkData:function(){console.log("initial: ",this.initial)},formatPrice:function(t){return t?(t/1).toFixed(0).replace(".",",").toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."):0},print:function(){for(var t=this,e=this.$store.getters["app/getPrint"],n=this.$store.getters["app/getPrinterLength"],header=this.$store.getters["app/getPrinterHeader"],address=this.$store.getters["app/getPrinterAddress"],o=this.$store.getters["app/getPrinterContact"],footer=this.$store.getters["app/getPrinterFooter"],l=this.initial.customer.NamaPelanggan,c=this.$store.getters["uac/getUser"],d=this.initial.product,h=this.formatPrice(this.initial.total),m=this.formatPrice(this.payment-(this.discountType?this.initial.total-this.initial.total*(this.discount/100):this.initial.total-this.discount)>0?this.discountType?this.payment-(this.initial.total-this.initial.total*(this.discount/100)):this.payment-(this.initial.total-this.discount):0),v=this.formatPrice(this.payment),f=this.discount?this.formatPrice(this.discount):"0",_=0!==this.initial.tax?this.formatPrice(this.initial.taxValue):this.formatPrice(this.initial.total*(this.$store.getters["app/getPPN"].ppnValue/100)),line="",C=0;C<n;C++)line+="-";BTPrinter.connect((function(data){console.log("Connected"),console.log(data)}),(function(t){console.log("Error connect"),console.log(t)}),e[0]),BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),header,"1","1"),BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),address,"1","1"),BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),o,"1","1"),BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),r()().format("DD-MM-YYYY HH:mm"),"1","1"),BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),line,"1","0"),BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),"Pelanggan : "+l.substring(0,14),"1","0"),BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),"Kasira : "+c.substring(0,14),"1","0"),BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),line,"1","0"),d.forEach((function(element){var e=t.formatPrice(element.Qty*element.HargaJual),o=element.NamaItem,r=element.Qty.toString(),l=t.formatPrice(element.HargaJual);BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),o.substring(0,n-23)+"  "+r.padStart(3)+"  "+l.padStart(7)+"  "+e.padStart(7),"1","0")})),BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),line,"1","0"),BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),"Subtotal"+h.padStart(n-8),"1","0");var y=f+"%";BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),"Diskon"+(this.discountType?y.padStart(n-6):f.padStart(n-6)),"1","0"),BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),"PPN("+this.$store.getters["app/getPPN"].ppnValue+"%)"+_.padStart(n-8),"1","0"),BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),"Total"+h.padStart(n-5),"1","0"),BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),"Bayar"+v.padStart(n-5),"1","0"),BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),"Kembalian"+m.padStart(n-9),"1","0"),BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),line,"1","0"),BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),footer,"1","1"),setTimeout((function(){BTPrinter.disconnect((function(data){console.log("Success"),console.log(data)}),(function(t){console.log("Error"),console.log(t)}),"PrinterName")}),1500)}}},c=n(84),component=Object(c.a)(l,(function(){var t=this,e=t._self._c;return e("div",[e("b-modal",{ref:"modalSelect",attrs:{id:"modalSelect",centered:"","no-fade":"","hide-header":"","hide-footer":"","no-close-on-backdrop":"","modal-class":"fade scale","content-class":"rounded",title:"BootstrapVue"},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},[e("div",[e("b-container",{staticClass:"mb-4"},[e("div",{staticClass:"pt-4"},[e("h5",{staticClass:"text-primary text-center"},[e("strong",[t._v("\n              "+t._s(t.title)+"\n            ")])])]),t._v(" "),e("div",{staticClass:"mt-3 text-left"},[t.initial?e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[t._v("\n             Kode Kasir\n            ")]),t._v(" "),e("div",{staticClass:"col-6 text-right"},[t._v("\n              "+t._s(t.initial.KodeKasir)+"\n            ")]),t._v(" "),e("div",{staticClass:"col-6"},[t._v("\n              Atas Nama\n            ")]),t._v(" "),e("div",{staticClass:"col-6 text-right"},[t._v("\n              "+t._s(t.initial.customer?t.initial.customer.NamaPelanggan:"-")+"\n            ")]),t._v(" "),e("div",{staticClass:"col-6"},[t._v("\n              Total Tagihan\n            ")]),t._v(" "),e("div",{staticClass:"col-6 text-right"},[t._v("\n              "+t._s(t._f("formatPrice")(t.initial.total))+"\n            ")]),t._v(" "),e("div",{staticClass:"col-6"},[t._v("\n              Pajak\n            ")]),t._v(" "),0!==t.initial.tax?e("div",{staticClass:"col-6 text-right"},[t._v("\n              ("+t._s(t.initial.tax)+"%) "+t._s(t._f("formatPrice")(t.initial.taxValue))+"\n            ")]):e("div",{staticClass:"col-6 text-right"},[t._v("\n              Sudah Termasuk Pajak\n            ")])]):t._e(),t._v(" "),e("div",{staticClass:"row mt-2"},[e("div",{staticClass:"col"},[e("h6",[t._v("\n                Diskon\n              ")])]),t._v(" "),e("div",{staticClass:"col text-right"},[e("b-form-checkbox",{attrs:{name:"check-button",switch:""},on:{input:function(e){t.discount=0}},model:{value:t.discountType,callback:function(e){t.discountType=e},expression:"discountType"}},[t._v("\n                "+t._s(t.discountType?"%":"Nominal")+"\n              ")])],1)]),t._v(" "),e("inputNumber",{ref:"inputNumber",attrs:{value:t.discount},on:{submit:function(e){t.discount=e}}}),t._v(" "),e("div",{staticClass:"row mt-2"},[e("div",{staticClass:"col"},[e("h6",{staticClass:"mb-0"},[e("strong",[t._v("\n                  Tagihan Akhir\n                ")])])]),t._v(" "),t.initial?e("div",{staticClass:"col text-right"},[e("h6",{staticClass:"mb-0"},[e("strong",[t._v("\n                  "+t._s(t._f("formatPrice")(t.discountType?t.initial.total-t.initial.total*(t.discount/100):t.initial.total-t.discount))+"\n                ")])])]):t._e()]),t._v(" "),e("hr"),t._v(" "),e("h6",{staticClass:"mt-3"},[t._v("\n            Nominal Pembayaran\n          ")]),t._v(" "),e("inputNumber",{ref:"inputNumber",attrs:{value:t.payment},on:{submit:function(e){t.payment=e}}}),t._v(" "),t.initial?e("div",{staticClass:"row mt-2"},[e("div",{staticClass:"col-6"},[e("h6",{staticClass:"mb-0"},[e("strong",[t._v("\n                  Kembalian\n                ")])])]),t._v(" "),e("div",{staticClass:"col-6 text-right"},[e("h6",{staticClass:"mb-0"},[e("strong",[t._v("\n                  "+t._s(t._f("formatPrice")(t.payment-(t.discountType?t.initial.total-t.initial.total*(t.discount/100):t.initial.total-t.discount)>0?t.discountType?t.payment-(t.initial.total-t.initial.total*(t.discount/100)):t.payment-(t.initial.total-t.discount):0))+"\n                ")])])])]):t._e()],1),t._v(" "),e("div",{staticClass:"mt-3"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-3"},[e("b-button",{attrs:{block:"",variant:"outline-danger"},on:{click:function(e){t.state=!1}}},[t._v("\n                Batal\n              ")])],1),t._v(" "),e("div",{staticClass:"col-9 pl-0"},[e("b-button",{attrs:{block:"",variant:"primary",disabled:!t.initial||!t.initial.total||t.payment<(t.discountType?t.initial.total-t.initial.total*(t.discount/100):t.initial.total-t.discount)},on:{click:t.submit}},[t._v("\n                Bayar\n              ")])],1)])])])],1)])],1)}),[],!1,null,null,null);e.default=component.exports},563:function(t,e,n){"use strict";n.r(e);n(11),n(8),n(16),n(25),n(32),n(172),n(516),n(208),n(118),n(31);var o=n(517),r=n(539),l=n(530),c=n(515),filter=n(522),d=n(546),h={components:{topbar:o.default,inputCustomer:r.default,inputWarehouse:l.default,inputNumber:c.default,inputFilter:filter.default,inputPembayaran:d.default},props:{title:{default:"Pilih Produk",type:String}},asyncData:function(t){t.isDev,t.route;var e=t.store;t.env,t.params,t.query,t.req,t.res,t.redirect,t.error;e.commit("uac/init"),e.commit("app/init"),e.commit("item/init")},data:function(){return{endpoint:"item/fetch",end_point:"item/checkerUpdate",warehouse:null,customer:null,filter:[],options:[],search:null,lines:[],KodeKasir:null,KodeLokasi:null,custumer:null,page:1,total:0,isError:!1,isLoading:!1,ppn:null}},computed:{totalTax:function(){var t=this.ppn&&!this.ppn.isIncludePPN?this.ppn.ppnValue:0;return(this.lines.length>0?this.lines.reduce((function(t,dt){var e=parseInt(dt.HargaJual),n=dt.Qty;return isNaN(e)?t+dt.Harga*n:t+e*n}),0):0)*(t/100)},totalAfterTax:function(){var t=this.ppn&&!this.ppn.isIncludePPN?this.ppn.ppnValue:0,e=this.lines.length>0?this.lines.reduce((function(t,dt){var e=parseInt(dt.HargaJual),n=dt.Qty;return isNaN(e)?t+dt.Harga*n:t+e*n}),0):0;return e+e*(t/100)}},mounted:function(){var t=this;this.warehouse=JSON.parse(JSON.stringify(this.$store.getters["app/getWarehouse"][0].KodeLokasi)),this.$store.getters["app/getPPN"]&&(this.ppn=JSON.parse(JSON.stringify(this.$store.getters["app/getPPN"]))),this.$nextTick((function(){t.init(),t.setData()}))},created:function(){this.$store.getters["item/getSelected"]&&this.setData()},methods:{setData:function(){var t=JSON.parse(JSON.stringify(this.$store.getters["item/getSelected"]));this.lines=t.Items,this.KodeKasir=t.KodeKasir,this.KodeLokasi=t.KodeLokasi,this.customer=t.Customer,this.code=t.KodeKasir,console.log(t)},init:function(){this.lines=[],this.fetchData()},onFilter:function(){this.$refs.inputFilter.show()},onFilterAdded:function(dt){this.filter=dt,this.fetchData()},navigateTo:function(t,e){e?this.$router.push(t):this.$router.replace(t)},onSelected:function(dt){var t=this.lines.find((function(t){return t.id===dt.id}));if(console.log("d",t),t&&(0===dt.Stok||t.Qty>=dt.Stok))this.$store.commit("alert/setAlert",{type:"fail",msg:"Stok tidak mencukupi"});else{var e=this.lines.findIndex((function(t){return t.id===dt.id}));if(console.log("e",e),e<0)if(0===dt.Stok||t&&t.Qty>=dt.Stok)this.$store.commit("alert/setAlert",{type:"fail",msg:"Stok tidak mencukupi"});else{var n=JSON.parse(JSON.stringify(dt));n.Qty=1,n.Harga=n.HargaJual,this.lines.push(n),console.log("temp",n)}else if(this.lines[e]&&this.lines[e].Qty){var o=this.lines[e];o.Qty+=1,this.lines.splice(e,1),this.lines.splice(e,0,o)}}},onRemove:function(t){this.lines.splice(t,1),console.log("index to be removed",t)},onSelectWarehouse:function(dt){this.warehouse!==dt.KodeLokasi&&(this.warehouse=dt.KodeLokasi,this.init())},onSelectCustomer:function(dt){this.customer=dt},fetchData:function(){var t=this,e=this;this.isError=!1,this.isLoading=!0;var n={category:e.filter,page:e.page,search:e.search,warehouse:e.warehouse?e.warehouse:null};this.$store.dispatch(this.endpoint,n).then((function(n){t.options=n.data.data.data,t.total=n.data.data.total,e.isError=!1,e.isLoading=!1})).catch((function(t){console.log("err",t),e.$store.commit("alert/setAlert",{type:"fail",msg:"Gagal Mengambil Data"}),e.isError=!0,e.isLoading=!1}))},onShowPayment:function(){var t={KodeKasir:this.KodeKasir,warehouse:this.warehouse,customer:this.customer,tax:this.ppn&&!this.ppn.isIncludePPN?this.ppn.ppnValue:0,total:this.totalAfterTax,taxValue:this.totalTax,lines:this.lines.map((function(dt){return{code:dt.KodeItem,qty:dt.Qty}})),product:this.lines};this.$refs.inputPembayaran.show(t)}}},m=n(84),component=Object(m.a)(h,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"layout d-flex flex-column h-100"},[e("topbar",{attrs:{subtitle:"Buat Pesanan"}}),t._v(" "),e("div",{staticClass:"top-divider"}),t._v(" "),e("div",{staticClass:"row mt-3 mx-2"},[e("div",{staticClass:"col-6"},[t.$store.getters["item/getSelected"]?e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("h6",{staticClass:"mb-0 text-primary"},[e("strong",[t._v("\n              Cek Penjualan "+t._s(t.KodeKasir)+"\n            ")])]),t._v(" "),t.warehouse?e("inputWarehouse",{ref:"warehouse",staticClass:"mt-2",attrs:{title:"Gudang",info:"Mengubah Gudang akan Menghapus Data yang ada di Cart",initial:t.KodeLokasi},on:{submit:t.onSelectWarehouse}}):t._e()],1)]):t._e()]),t._v(" "),e("div",{staticClass:"col-6"},[t._m(0),t._v(" "),e("inputCustomer",{ref:"customer",staticClass:"mt-2",attrs:{title:"Customer",initial:t.customer.NamaPelanggan},on:{submit:t.onSelectCustomer}})],1)]),t._v(" "),e("div",{staticClass:"row mt-4 mx-3"},[e("div",{staticClass:"col-5"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("h6",{staticClass:"mb-0 text-primary"},[e("strong",[t._v("\n              "+t._s(t.title)+"\n            ")])])]),t._v(" "),e("div",{staticClass:"col-4 text-center"},[e("div",{staticClass:"b-primary",class:{"bg-soft":t.filter.length>0},on:{click:t.onFilter}},[e("h6",{staticClass:"mb-0 text-primary"},[e("strong",[t._v("\n                "+t._s(t.filter.length>0?t.filter.length:"")+" Filter\n              ")])])])])])]),t._v(" "),t._m(1)]),t._v(" "),e("div",{staticClass:"row mx-3 mt-3 pb-5 pb-5 product-content"},[e("div",{staticClass:"col-5 text-center product-content",staticStyle:{"overflow-y":"scroll"}},[t.isLoading?e("div",{staticClass:"row"},[e("div",{staticClass:"col v-center"},[e("b-spinner",{staticClass:"mt-4",attrs:{variant:"primary",type:"grow",label:"Spinning"}}),t._v(" "),e("p",[t._v("Tunggu")])],1)]):e("div",{staticClass:"row mt-2"},t._l(t.options,(function(dt,i){return e("div",{key:"i-"+i,staticClass:"col-3 pl-0 pr-0",on:{click:function(e){return t.onSelected(dt)}}},[e("div",{staticClass:"card m-1",class:{"out-of-stock":0===dt.Stok,clickable:dt.Stok>0}},[e("img",{staticStyle:{height:"5rem"},attrs:{src:"https://placekitten.com/640/360",alt:""}}),t._v(" "),e("p",{staticClass:"mb-0 mt-1 text-primary",staticStyle:{overflow:"hidden",height:"4rem"}},[t._v("\n              "+t._s(dt.NamaItem)+"\n            ")]),t._v(" "),e("hr",{staticClass:"my-0 py-0"}),t._v(" "),e("p",{staticClass:"mb-0 mt-1 text-primary",staticStyle:{overflow:"hidden",height:"3rem"}},[t._v("\n              "+t._s(t._f("formatPrice")(dt.HargaJual))+" "),e("br"),t._v("\n              Stok: "+t._s(dt.Stok)+"\n            ")])])])})),0)]),t._v(" "),e("div",{staticClass:"col-7 bl-1 product-content",staticStyle:{"overflow-y":"scroll"}},[t._l(t.lines,(function(dt,n){return e("div",{key:n,staticClass:"row mt-2"},[e("div",{staticClass:"col-5 px-1"},[e("input",{directives:[{name:"model",rawName:"v-model",value:dt.NamaItem,expression:"dt.NamaItem"}],staticClass:"form-control input-modal",attrs:{readonly:"",type:"text"},domProps:{value:dt.NamaItem},on:{input:function(e){e.target.composing||t.$set(dt,"NamaItem",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"col-2 px-1"},[e("input",{directives:[{name:"model",rawName:"v-model",value:dt.KodeSatuan,expression:"dt.KodeSatuan"}],staticClass:"form-control input-modal",attrs:{readonly:"",type:"text"},domProps:{value:dt.KodeSatuan},on:{input:function(e){e.target.composing||t.$set(dt,"KodeSatuan",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"col-2 px-1"},[e("input",{directives:[{name:"model",rawName:"v-model",value:dt.Harga,expression:"dt.Harga"}],staticClass:"form-control input-modal",attrs:{readonly:"",type:"text"},domProps:{value:dt.Harga},on:{input:function(e){e.target.composing||t.$set(dt,"Harga",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"col-2 px-1"},[e("inputNumber",{ref:"inputNumber",refInFor:!0,attrs:{value:dt.Qty,max:dt.Stok},on:{submit:function(t){dt.Qty=t}}})],1),t._v(" "),e("div",{staticClass:"col-1 px-1"},[e("b-icon",{staticClass:"mt-1 text-danger",attrs:{icon:"x","font-scale":"1.7"},on:{click:function(e){return t.onRemove(n)}}})],1)])})),t._v(" "),e("div",{staticClass:"row m-2"},[e("div",{directives:[{name:"show",rawName:"v-show",value:0===t.lines.length,expression:"lines.length === 0"}],staticClass:"col-12 text-center my-5"},[t._v("\n          Item belum ditambahkan\n        ")])])],2)]),t._v(" "),e("div",{staticClass:"row",staticStyle:{position:"absolute",bottom:"0",width:"100%"}},[e("div",{staticClass:"col-5 justify-content-center"},[e("b-pagination",{attrs:{"total-rows":t.total,"per-page":12,disabled:t.isLoading,align:"center"},on:{input:t.fetchData},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1),t._v(" "),e("div",{staticClass:"col-7"},[e("div",{staticClass:"row pl-2"},[e("div",{staticClass:"col"},[t.ppn&&!t.ppn.isIncludePPN?e("div",[t._v("\n            Dengan PPN "+t._s(t.ppn.ppnValue)+" %\n          ")]):e("div",[t._v("\n            Total Harga Sudah Termasuk PPN\n          ")]),t._v("\n          Total : "+t._s(t._f("formatPrice")(t.totalAfterTax))+" ("+t._s(t._f("formatPrice")(t.totalTax))+")\n        ")]),t._v(" "),e("div",{staticClass:"col text-right"},[e("b-button",{staticClass:"button-bottom",attrs:{variant:"primary"},on:{click:t.onShowPayment}},[t._v("\n            Simpan ya\n          ")])],1)])])]),t._v(" "),e("inputFilter",{ref:"inputFilter",on:{submit:t.onFilterAdded}}),t._v(" "),e("inputPembayaran",{ref:"inputPembayaran"})],1)}),[function(){var t=this._self._c;return t("h6",{staticClass:"mb-0 text-primary"},[t("strong",[this._v("\n          Customer\n        ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-7"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-5 pl-1"},[e("h6",{staticClass:"mb-0 text-primary"},[e("strong",[t._v("\n              Barang\n            ")])])]),t._v(" "),e("div",{staticClass:"col-2 pl-1"},[e("h6",{staticClass:"mb-0 text-primary"},[e("strong",[t._v("\n              Satuan\n            ")])])]),t._v(" "),e("div",{staticClass:"col-2 pl-1"},[e("h6",{staticClass:"mb-0 text-primary"},[e("strong",[t._v("\n              Harga\n            ")])])]),t._v(" "),e("div",{staticClass:"col-2 pl-1"},[e("h6",{staticClass:"mb-0 text-primary"},[e("strong",[t._v("\n              Qty\n            ")])])]),t._v(" "),e("div",{staticClass:"col-1 pl-1"})])])}],!1,null,null,null);e.default=component.exports}}]);