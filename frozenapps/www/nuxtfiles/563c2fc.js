(window.webpackJsonp=window.webpackJsonp||[]).push([[12,10],{515:function(t,n,e){"use strict";e.r(n);e(8),e(47),e(209),e(36);var o={props:{value:{default:0,type:Number},max:{default:null,type:Number}},data:function(){return{input:this.value?this.value:0,state:!1,parsed:null}},watch:{value:function(t){this.parsed=t}},mounted:function(){this.parsed=this.value},methods:{show:function(){this.state=!0,this.input=this.parsed.toString()},onAdd:function(dt){this.max&&parseFloat(this.input+dt)>this.max?this.input=this.max.toString():0===parseInt(this.input)?this.input=dt:this.input+=dt},onDelete:function(){this.input=this.input.slice(0,-1)},onSubmit:function(){this.parsed=parseFloat(this.input?this.input:0),this.$emit("submit",this.parsed),this.state=!1}}},l=e(84),component=Object(l.a)(o,(function(){var t=this,n=t._self._c;return n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.parsed,expression:"parsed"}],staticClass:"form-control input-modal",attrs:{readonly:"",type:"text"},domProps:{value:t.parsed},on:{click:t.show,input:function(n){n.target.composing||(t.parsed=n.target.value)}}}),t._v(" "),n("b-modal",{ref:"modalNumber",attrs:{id:"modalNumber",centered:"","no-fade":"","hide-header":"","hide-footer":"","modal-class":"fade scale","content-class":"text-center rounded",title:"BootstrapVue"},model:{value:t.state,callback:function(n){t.state=n},expression:"state"}},[n("b-container",[n("div",{staticClass:"pt-4 text-right"},[n("h5",[n("strong",[t._v("\n            "+t._s(t.input?t.input:0)+"\n          ")])])])]),t._v(" "),n("hr",{staticClass:"m-3"}),t._v(" "),t.max?n("b-container",[n("div",{staticClass:"text-right"},[n("h6",{staticClass:"text-danger"},[n("strong",[t._v("\n            ( Max "+t._s(t.max)+" )\n          ")])])])]):t._e(),t._v(" "),n("div",[n("div",{staticClass:"row m-3 mb-5"},[t._l(9,(function(i){return n("div",{key:i,staticClass:"col-4 p-4 b-1 clickable",on:{click:function(n){t.onAdd(i.toString())}}},[t._v("\n          "+t._s(i)+"\n        ")])})),t._v(" "),n("div",{staticClass:"col-4 p-4 b-1",on:{click:function(n){return t.onAdd(".")}}},[t._v("\n          .\n        ")]),t._v(" "),n("div",{staticClass:"col-4 p-4 b-1",on:{click:function(n){t.input.length>0&&t.onAdd("0")}}},[t._v("\n          0\n        ")]),t._v(" "),n("div",{staticClass:"col-4 p-4 b-1",on:{click:t.onDelete}},[t._v("\n          x\n        ")])],2)]),t._v(" "),n("b-button",{staticClass:"mt-3 text-white",attrs:{variant:"primary",block:""},on:{click:t.onSubmit}},[t._v("\n      Simpan\n    ")]),t._v(" "),n("b-button",{staticClass:"mt-3",attrs:{variant:"outline-danger",block:""},on:{click:function(){t.state=!1}}},[t._v("\n      Batal\n    ")])],1)],1)}),[],!1,null,null,null);n.default=component.exports},531:function(t,n,e){"use strict";var o=e(26),l=e(532).start;o({target:"String",proto:!0,forced:e(533)},{padStart:function(t){return l(this,t,arguments.length>1?arguments[1]:void 0)}})},532:function(t,n,e){var o=e(28),l=e(99),r=e(50),c=e(210),d=e(65),h=o(c),m=o("".slice),f=Math.ceil,v=function(t){return function(n,e,o){var c,v,_=r(d(n)),T=l(e),x=_.length,P=void 0===o?" ":r(o);return T<=x||""==P?_:((v=h(P,f((c=T-x)/P.length))).length>c&&(v=m(v,0,c)),t?_+v:v+_)}};t.exports={start:v(!1),end:v(!0)}},533:function(t,n,e){var o=e(86);t.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(o)},545:function(t,n,e){"use strict";e.r(n);e(25),e(32),e(143),e(8),e(47),e(13),e(531),e(60);var o=e(10),l=e.n(o),r={components:{inputNumber:e(515).default},props:{title:{default:"Pembayaran",type:String}},data:function(){return{store_endpoint:"item/transaction",payment:0,discount:0,discountType:!1,initial:null,state:!1,isError:!1,isLoading:!1}},mounted:function(){this.initial&&(this.input=this.initial)},methods:{navigateTo:function(t,n){n?this.$router.push(t):this.$router.replace(t)},show:function(dt){this.state=!0,this.initial=dt,this.payment=0,this.discount=0,this.discountType=!1},submit:function(){var t=this,n={KodeKasir:this.initial.KodeKasir,warehouse:this.initial.warehouse,customer:this.initial.customer?this.initial.customer.KodePelanggan:"",tax:this.initial.ppn&&!this.initial.ppn.isIncludePPN?this.initial.ppn.ppnValue:0,payment:this.payment,discount:this.discountType?this.initial.total*(this.discount/100):this.discount,lines:this.initial.lines};this.$store.dispatch(this.update_endpoint,n).then((function(n){t.$store.commit("alert/setAlert",{type:"success",msg:"Data Berhasil Disimpan"}),t.state=!1,t.navigateTo("/dashboard/cashier")})).catch((function(n){console.log(n),t.$store.commit("alert/setAlert",{type:"fail",msg:"Terjadi Kesalahan"})}))},checkData:function(){console.log("initial: ",this.initial)},formatPrice:function(t){return t?(t/1).toFixed(0).replace(".",",").toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."):0},print:function(){for(var t=this,n=this.$store.getters["app/getPrint"],e=this.$store.getters["app/getPrinterLength"],header=this.$store.getters["app/getPrinterHeader"],address=this.$store.getters["app/getPrinterAddress"],o=this.$store.getters["app/getPrinterContact"],footer=this.$store.getters["app/getPrinterFooter"],r=this.initial.customer.NamaPelanggan,c=this.$store.getters["uac/getUser"],d=this.initial.product,h=this.formatPrice(this.initial.total),m=this.formatPrice(this.payment-(this.discountType?this.initial.total-this.initial.total*(this.discount/100):this.initial.total-this.discount)>0?this.discountType?this.payment-(this.initial.total-this.initial.total*(this.discount/100)):this.payment-(this.initial.total-this.discount):0),f=this.formatPrice(this.payment),v=this.discount?this.formatPrice(this.discount):"0",_=0!==this.initial.tax?this.formatPrice(this.initial.taxValue):this.formatPrice(this.initial.total*(this.$store.getters["app/getPPN"].ppnValue/100)),line="",T=0;T<e;T++)line+="-";BTPrinter.connect((function(data){console.log("Connected"),console.log(data)}),(function(t){console.log("Error connect"),console.log(t)}),n[0]),BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),header,"1","1"),BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),address,"1","1"),BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),o,"1","1"),BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),l()().format("DD-MM-YYYY HH:mm"),"1","1"),BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),line,"1","0"),BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),"Pelanggan : "+r.substring(0,14),"1","0"),BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),"Kasir : "+c.substring(0,14),"1","0"),BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),line,"1","0"),d.forEach((function(element){var n=t.formatPrice(element.Qty*element.HargaJual),o=element.NamaItem,l=element.Qty.toString(),r=t.formatPrice(element.HargaJual);BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),o.substring(0,e-23)+"  "+l.padStart(3)+"  "+r.padStart(7)+"  "+n.padStart(7),"1","0")})),BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),line,"1","0"),BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),"Subtotal"+h.padStart(e-8),"1","0");var x=v+"%";BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),"Diskon"+(this.discountType?x.padStart(e-6):v.padStart(e-6)),"1","0"),BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),"PPN("+this.$store.getters["app/getPPN"].ppnValue+"%)"+_.padStart(e-8),"1","0"),BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),"Total"+h.padStart(e-5),"1","0"),BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),"Bayar"+f.padStart(e-5),"1","0"),BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),"Kembalian"+m.padStart(e-9),"1","0"),BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),line,"1","0"),BTPrinter.printTextSizeAlign((function(data){}),(function(t){console.log(t)}),footer,"1","1"),setTimeout((function(){BTPrinter.disconnect((function(data){console.log("Success"),console.log(data)}),(function(t){console.log("Error"),console.log(t)}),"PrinterName")}),1500)}}},c=e(84),component=Object(c.a)(r,(function(){var t=this,n=t._self._c;return n("div",[n("b-modal",{ref:"modalSelect",attrs:{id:"modalSelect",centered:"","no-fade":"","hide-header":"","hide-footer":"","no-close-on-backdrop":"","modal-class":"fade scale","content-class":"rounded",title:"BootstrapVue"},model:{value:t.state,callback:function(n){t.state=n},expression:"state"}},[n("div",[n("b-container",{staticClass:"mb-4"},[n("div",{staticClass:"pt-4"},[n("h5",{staticClass:"text-primary text-center"},[n("strong",[t._v("\n              "+t._s(t.title)+"\n            ")])])]),t._v(" "),n("div",{staticClass:"mt-3 text-left"},[t.initial?n("div",{staticClass:"row"},[n("div",{staticClass:"col-6"},[t._v("\n              Atas Nama\n            ")]),t._v(" "),n("div",{staticClass:"col-6 text-right"},[t._v("\n              "+t._s(t.initial.customer?t.initial.customer.NamaPelanggan:"-")+"\n            ")]),t._v(" "),n("div",{staticClass:"col-6"},[t._v("\n              Total Tagihan\n            ")]),t._v(" "),n("div",{staticClass:"col-6 text-right"},[t._v("\n              "+t._s(t._f("formatPrice")(t.initial.total))+"\n            ")]),t._v(" "),n("div",{staticClass:"col-6"},[t._v("\n              Pajak\n            ")]),t._v(" "),0!==t.initial.tax?n("div",{staticClass:"col-6 text-right"},[t._v("\n              ("+t._s(t.initial.tax)+"%) "+t._s(t._f("formatPrice")(t.initial.taxValue))+"\n            ")]):n("div",{staticClass:"col-6 text-right"},[t._v("\n              Sudah Termasuk Pajak\n            ")])]):t._e(),t._v(" "),n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col"},[n("h6",[t._v("\n                Diskon\n              ")])]),t._v(" "),n("div",{staticClass:"col text-right"},[n("b-form-checkbox",{attrs:{name:"check-button",switch:""},on:{input:function(n){t.discount=0}},model:{value:t.discountType,callback:function(n){t.discountType=n},expression:"discountType"}},[t._v("\n                "+t._s(t.discountType?"%":"Nominal")+"\n              ")])],1)]),t._v(" "),n("inputNumber",{ref:"inputNumber",attrs:{value:t.discount},on:{submit:function(n){t.discount=n}}}),t._v(" "),n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col"},[n("h6",{staticClass:"mb-0"},[n("strong",[t._v("\n                  Tagihan Akhir\n                ")])])]),t._v(" "),t.initial?n("div",{staticClass:"col text-right"},[n("h6",{staticClass:"mb-0"},[n("strong",[t._v("\n                  "+t._s(t._f("formatPrice")(t.discountType?t.initial.total-t.initial.total*(t.discount/100):t.initial.total-t.discount))+"\n                ")])])]):t._e()]),t._v(" "),n("hr"),t._v(" "),n("h6",{staticClass:"mt-3"},[t._v("\n            Nominal Pembayaran\n          ")]),t._v(" "),n("inputNumber",{ref:"inputNumber",attrs:{value:t.payment},on:{submit:function(n){t.payment=n}}}),t._v(" "),t.initial?n("div",{staticClass:"row mt-2"},[n("div",{staticClass:"col-6"},[n("h6",{staticClass:"mb-0"},[n("strong",[t._v("\n                  Kembalian\n                ")])])]),t._v(" "),n("div",{staticClass:"col-6 text-right"},[n("h6",{staticClass:"mb-0"},[n("strong",[t._v("\n                  "+t._s(t._f("formatPrice")(t.payment-(t.discountType?t.initial.total-t.initial.total*(t.discount/100):t.initial.total-t.discount)>0?t.discountType?t.payment-(t.initial.total-t.initial.total*(t.discount/100)):t.payment-(t.initial.total-t.discount):0))+"\n                ")])])])]):t._e()],1),t._v(" "),n("div",{staticClass:"mt-3"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-3"},[n("b-button",{attrs:{block:"",variant:"outline-danger"},on:{click:function(n){t.state=!1}}},[t._v("\n                Batal\n              ")])],1),t._v(" "),n("div",{staticClass:"col-9 pl-0"},[n("b-button",{attrs:{block:"",variant:"primary",disabled:!t.initial||!t.initial.total||t.payment<(t.discountType?t.initial.total-t.initial.total*(t.discount/100):t.initial.total-t.discount)},on:{click:t.submit}},[t._v("\n                Bayar\n              ")])],1)])])])],1)])],1)}),[],!1,null,null,null);n.default=component.exports}}]);